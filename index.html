<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mapa Mental Interactivo SIS</title>
<style>
body{
  margin:0;
  height:100vh;
  background:#0f1724;
  color:#e6eef6;
  font-family:Arial, sans-serif;
}
.canvas{
  position:relative;
  width:100%;
  height:100%;
  overflow:hidden;
}
.node{
  position:absolute;
  min-width:200px;
  max-width:300px;
  padding:12px 16px;
  background:linear-gradient(180deg,#0b1220,#0f1724);
  border-radius:12px;
  border:1px solid rgba(255,255,255,0.05);
  box-shadow:0 6px 18px rgba(0,0,0,0.6);
  cursor:grab;
}
.node:active{cursor:grabbing;}
.node .title{
  font-weight:700;
  color:#6ee7b7;
  margin-bottom:6px;
}
.node ul{margin:6px 0 0;padding-left:16px;}
#connectors{
  position:absolute;
  left:0;
  top:0;
  width:100%;
  height:100%;
  pointer-events:none;
}
</style>
</head>
<body>
<div class="canvas" id="canvas">
  <svg id="connectors"></svg>

  <!-- Nodo raíz -->
  <div class="node" id="n-root" data-id="n-root" data-parent="" style="left:50%; top:10%; transform:translateX(-50%);">
    <div class="title">Sistema de Información Sanitario (SIS)</div>
    <p>Conjunto de datos sanitarios organizados que permiten conocer, analizar y gestionar el estado de salud de una población.</p>
    <ul>
      <li><strong>Funciones:</strong> recoger, procesar, comparar, analizar y transmitir datos.</li>
      <li><strong>Finalidad:</strong>
        <ul>
          <li>Gestión de servicios sanitarios</li>
          <li>Definir estrategias de salud</li>
          <li>Investigación y docencia</li>
          <li>Generar información estratégica</li>
        </ul>
      </li>
      <li><strong>OMS:</strong> mecanismo interoperable, con datos abiertos y uso ético a través de TIC.</li>
    </ul>
  </div>

  <!-- Nodo SIS del SNS -->
  <div class="node" id="n-sns" data-id="n-sns" data-parent="n-root" style="left:10%; top:25%;">
    <div class="title">SIS del SNS</div>
    <ul>
      <li><strong>Marco legal:</strong>
        <ul>
          <li>Ley 14/1986 (General de Sanidad): organiza el sistema y crea el Consejo Interterritorial.</li>
          <li>Ley 16/2003 (Cohesión y Calidad): regula el SIS-SNS.</li>
        </ul>
      </li>
      <li><strong>Objetivos:</strong>
        <ul>
          <li>Autoridades sanitarias: elaborar políticas y tomar decisiones.</li>
          <li>Profesionales: mejorar la práctica clínica con información fiable.</li>
          <li>Ciudadanos: acceso a información sobre derechos, riesgos y uso de servicios.</li>
          <li>Organizaciones: fomentar la participación de asociaciones, ONGs y sociedades científicas.</li>
        </ul>
      </li>
      <li><strong>Contenidos:</strong>
        <ul>
          <li>Población: características, nivel de salud, utilización del SNS, opiniones.</li>
          <li>Oferta de servicios: cartera, prevención, asistencia, promoción.</li>
          <li>Recursos sanitarios: estructuras, profesionales, tecnología, farmacia.</li>
          <li>Capacidad de respuesta: resultados, equidad, calidad, eficiencia, satisfacción ciudadana.</li>
        </ul>
      </li>
    </ul>
  </div>

  <!-- Nodo Componentes -->
  <div class="node" id="n-componentes" data-id="n-componentes" data-parent="n-root" style="left:50%; top:25%;">
    <div class="title">Componentes de un SIS</div>
    <ul>
      <li>Marco básico: legal y organizacional.</li>
      <li>Infraestructura: equipos, software, sistemas TIC.</li>
      <li>Indicadores: cifras y objetivos.</li>
      <li>Fuentes de datos: registros clínicos, historia clínica digital, CMBD.</li>
      <li>Gestión de datos: recopilación, almacenamiento, análisis.</li>
      <li>Productos de información: informes y estadísticas procesadas.</li>
      <li>Difusión y uso: acceso a gestores, profesionales y ciudadanía.</li>
    </ul>
  </div>

  <!-- Nodo Estrategia -->
  <div class="node" id="n-estrategia" data-id="n-estrategia" data-parent="n-root" style="left:80%; top:25%;">
    <div class="title">Estrategia de Salud Digital (2021)</div>
    <ul>
      <li>Objetivo: transformación digital del SNS.</li>
      <li>Servicios digitales: telemedicina, apps, historia clínica interoperable.</li>
      <li>Interoperabilidad: flujo entre administraciones.</li>
      <li>Analítica: Big Data para decisiones sanitarias.</li>
      <li>Comisión de Salud Digital:
        <ul>
          <li>Subcomisión de Tecnologías</li>
          <li>Subcomisión del SIS del SNS</li>
        </ul>
      </li>
    </ul>
  </div>

  <!-- Nodo Información -->
  <div class="node" id="n-info" data-id="n-info" data-parent="n-root" style="left:30%; top:50%;">
    <div class="title">Información sanitaria</div>
    <ul>
      <li>Tipos de datos:
        <ul>
          <li>No clínicos: encuestas, barómetros, bases de población</li>
          <li>Clínicos: historia clínica, informes, Historia Digital de Salud (5P)</li>
          <li>Otras fuentes: Costes, Morbilidad, Recursos</li>
        </ul>
      </li>
      <li>Características: coherente, pertinente, integrable, flexible, accesible</li>
      <li>Procesos: Registro, Almacenamiento, Procesamiento, Generación de informes</li>
      <li>Usuarios: Ministerio, CCAA, Ciudadanos</li>
    </ul>
  </div>

  <!-- Nodo Niveles -->
  <div class="node" id="n-niveles" data-id="n-niveles" data-parent="n-root" style="left:70%; top:50%;">
    <div class="title">Niveles asistenciales</div>
    <ul>
      <li>Atención primaria (SIAP): promoción, prevención, asistencia, urgencias</li>
      <li>Atención especializada (SIAE): diagnósticos, hospitalización, terapias, rehabilitación</li>
    </ul>
  </div>

  <!-- Nodo Interoperabilidad -->
  <div class="node" id="n-interop" data-id="n-interop" data-parent="n-root" style="left:50%; top:70%;">
    <div class="title">Interoperabilidad</div>
    <ul>
      <li>Niveles: Técnico, Sintáctico, Semántico, Organizacional</li>
      <li>Estándares: Mensajería (HL7, DICOM), Documentación (CCR, CDA, CCD), Terminológicos (SNOMED, CIE, LOINC)</li>
    </ul>
  </div>

</div>

<script>
// Drag & Drop y actualización de conexiones
const svg = document.getElementById('connectors');
const nodes = document.querySelectorAll('.node');

function getCenter(el){
  const r = el.getBoundingClientRect();
  const c = svg.getBoundingClientRect();
  return {x:r.left+r.width/2-c.left, y:r.top+r.height/2-c.top};
}

function drawConnections(){
  svg.innerHTML='';
  nodes.forEach(n=>{
    const pid = n.dataset.parent;
    if(!pid) return;
    const parent = document.getElementById(pid);
    if(!parent) return;
    const c1 = getCenter(parent);
    const c2 = getCenter(n);
    const path = document.createElementNS('http://www.w3.org/2000/svg','path');
    path.setAttribute('d',`M${c1.x},${c1.y} C${c1.x},${(c1.y+c2.y)/2} ${c2.x},${(c1.y+c2.y)/2} ${c2.x},${c2.y}`);
    path.setAttribute('stroke','rgba(110,231,183,0.7)');
    path.setAttribute('stroke-width','2');
    path.setAttribute('fill','none');
    svg.appendChild(path);
  });
}

// Drag & Drop
nodes.forEach(n=>{
  n.onmousedown = function(e){
    const shiftX = e.clientX - n.getBoundingClientRect().left;
    const shiftY = e.clientY - n.getBoundingClientRect().top;
    function moveAt(pageX,pageY){
      n.style.left = pageX - shiftX + 'px';
      n.style.top = pageY - shiftY + 'px';
      drawConnections();
    }
    function onMouseMove(e){
      moveAt(e.pageX,e.pageY);
    }
    document.addEventListener('mousemove',onMouseMove);
    n.onmouseup = function(){
      document.removeEventListener('mousemove',onMouseMove);
      n.onmouseup = null;
    }
  }
  n.ondragstart = () => false;
});

window.addEventListener('load', drawConnections);
window.addEventListener('resize', drawConnections);
</script>
</body>
</html>
